# –°–∏—Å—Ç–µ–º–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π - –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## ‚úÖ –ß—Ç–æ –£–ñ–ï —Å–¥–µ–ª–∞–Ω–æ:

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è `migration-approval-system.sql`
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `payment_categories` (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π)
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `outgoing_payments` (–∏—Å—Ö–æ–¥—è—â–∏–µ –ø–ª–∞—Ç–µ–∂–∏)
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `payment_approvals` (–ø–æ–¥–ø–∏—Å–∏ –∞–¥–º–∏–Ω–æ–≤)
- ‚úÖ 6 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–¢—É—Ä–æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, –ó–∞—Ä–ø–ª–∞—Ç–∞, –ê—Ä–µ–Ω–¥–∞, –ù–∞–ª–æ–≥–∏, –£—Å–ª—É–≥–∏, –ü—Ä–æ—á–µ–µ)

### 2. Backend API
- ‚úÖ –§–∞–π–ª `api/endpoints/approvals.php`
- ‚úÖ GET /api/approvals/categories - —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ POST /api/approvals/categories - —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
- ‚úÖ GET /api/approvals/payments - —Å–ø–∏—Å–æ–∫ –ø–ª–∞—Ç–µ–∂–µ–π (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
- ‚úÖ POST /api/approvals/payments - —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂
- ‚úÖ POST /api/approvals/payments/{id}/approve - –æ–¥–æ–±—Ä–∏—Ç—å
- ‚úÖ POST /api/approvals/payments/{id}/reject - –æ—Ç–∫–ª–æ–Ω–∏—Ç—å
- ‚úÖ POST /api/approvals/bulk-approve - –º–∞—Å—Å–æ–≤–æ–µ –æ–¥–æ–±—Ä–µ–Ω–∏–µ
- ‚úÖ –†–æ—É—Ç–∏–Ω–≥ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `api/index.php`

---

## üìã –ß—Ç–æ –ù–£–ñ–ù–û –¥–æ–¥–µ–ª–∞—Ç—å:

### Frontend (Vue.js):

1. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π"** (`src/views/PaymentCategories.vue`)
   - –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
   - –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
   - –¶–≤–µ—Ç–∞ –∏ –∏–∫–æ–Ω–∫–∏

2. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ "–°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂"** (`src/views/CreateOutgoingPayment.vue`)
   - –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è
   - –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - –í—ã–±–æ—Ä –ø–æ–¥–ø–∏—Å–∞–Ω—Ç–æ–≤ (multiple select)
   - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ

3. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ü–ª–∞—Ç–µ–∂–∏ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ"** (`src/views/ApprovalPayments.vue`)
   - –°–ø–∏—Å–æ–∫ –ø–ª–∞—Ç–µ–∂–µ–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:
     - –ú–æ–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ
     - –ñ–¥—É –º–æ–µ–π –ø–æ–¥–ø–∏—Å–∏
     - –í—Å–µ –ø–ª–∞—Ç–µ–∂–∏
   - –ö–Ω–æ–ø–∫–∏ –æ–¥–æ–±—Ä–∏—Ç—å/–æ—Ç–∫–ª–æ–Ω–∏—Ç—å
   - –ß–µ–∫–±–æ–∫—Å—ã –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞

4. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª–µ–π –ø–ª–∞—Ç–µ–∂–∞** (–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ)
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–ª–∞—Ç–µ–∂–µ
   - –°–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å–∞–Ω—Ç–æ–≤ (–∫—Ç–æ –ø–æ–¥–ø–∏—Å–∞–ª, –∫—Ç–æ –Ω–µ—Ç)
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞
   - –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π

### SMS –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:

5. **–û—Ç–ø—Ä–∞–≤–∫–∞ SMS –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏**
   - –ü–æ–¥–ø–∏—Å–∞–Ω—Ç–∞–º: "–ù–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂ –Ω–∞ 50000‚Ç∏ '–û–ø–ª–∞—Ç–∞ —Ç—É—Ä–æ–ø–µ—Ä–∞—Ç–æ—Ä—É'. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://byfly-pay.com/approvals/ABC123"

6. **–û—Ç–ø—Ä–∞–≤–∫–∞ SMS –ø—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏ –≤—Å–µ—Ö**
   - –ë—É—Ö–≥–∞–ª—Ç–µ—Ä—É: "–ü–ª–∞—Ç–µ–∂ '–û–ø–ª–∞—Ç–∞ —Ç—É—Ä–æ–ø–µ—Ä–∞—Ç–æ—Ä—É' –æ–¥–æ–±—Ä–µ–Ω –≤—Å–µ–º–∏. –ú–æ–∂–µ—Ç–µ –æ–ø–ª–∞—á–∏–≤–∞—Ç—å."

7. **–û—Ç–ø—Ä–∞–≤–∫–∞ SMS –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏**
   - –ë—É—Ö–≥–∞–ª—Ç–µ—Ä—É: "–ü–ª–∞—Ç–µ–∂ '–û–ø–ª–∞—Ç–∞ —Ç—É—Ä–æ–ø–µ—Ä–∞—Ç–æ—Ä—É' –æ—Ç–∫–ª–æ–Ω–µ–Ω –∞–¥–º–∏–Ω–æ–º –ò–≤–∞–Ω –ò."

### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:

8. **–û–±–Ω–æ–≤–∏—Ç—å** `api/endpoints/upload.php`
   - –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –≤ `/uploads/payment-documents/`
   - –í–æ–∑–≤—Ä–∞—â–∞—Ç—å URL –¥–æ–∫—É–º–µ–Ω—Ç–∞

9. **–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**
   - –û—Ç–∫—Ä—ã—Ç–∏–µ PDF/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
   - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞

### –†–æ—É—Ç–∏–Ω–≥ –∏ –º–µ–Ω—é:

10. **–î–æ–±–∞–≤–∏—Ç—å –≤** `src/router/index.js`:
    - `/payment-categories`
    - `/create-outgoing-payment`
    - `/approval-payments`

11. **–î–æ–±–∞–≤–∏—Ç—å –≤** `src/layouts/AdminLayout.vue`:
    - –†–∞–∑–¥–µ–ª "–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π"
    - –ü–æ–¥—Ä–∞–∑–¥–µ–ª—ã: –°–æ–∑–¥–∞—Ç—å, –ù–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ, –ö–∞—Ç–µ–≥–æ—Ä–∏–∏

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

```
–ë—É—Ö–≥–∞–ª—Ç–µ—Ä                              –ê–¥–º–∏–Ω—ã (–ø–æ–¥–ø–∏—Å–∞–Ω—Ç—ã)
    ‚Üì                                         ‚Üì
–°–æ–∑–¥–∞–µ—Ç –ø–ª–∞—Ç–µ–∂                          –ü–æ–ª—É—á–∞—é—Ç SMS
    ‚Üì                                         ‚Üì
–í—ã–±–∏—Ä–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∞–Ω—Ç–æ–≤                    –û—Ç–∫—Ä—ã–≤–∞—é—Ç —Å—Å—ã–ª–∫—É
    ‚Üì                                         ‚Üì
–ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç                      –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç –¥–æ–∫—É–º–µ–Ω—Ç
    ‚Üì                                         ‚Üì
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ              –û–¥–æ–±—Ä—è—é—Ç –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω—è—é—Ç
    ‚Üì                                         ‚Üì
–û–∂–∏–¥–∞–µ—Ç                                 –ú–∞—Å—Å–æ–≤–æ–µ –æ–¥–æ–±—Ä–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    ‚Üì                                         ‚Üì
–ü–æ–ª—É—á–∞–µ—Ç SMS:                           
  - –í—Å–µ –æ–¥–æ–±—Ä–∏–ª–∏ ‚Üí –ú–æ–∂–Ω–æ –æ–ø–ª–∞—á–∏–≤–∞—Ç—å
  - –ö—Ç–æ-—Ç–æ –æ—Ç–∫–ª–æ–Ω–∏–ª ‚Üí –ü–ª–∞—Ç–µ–∂ –æ—Ç–∫–ª–æ–Ω–µ–Ω
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î:

### payment_categories
- id, name, description, color, icon_emoji
- –ü—Ä–∏–º–µ—Ä: "–û–ø–ª–∞—Ç–∞ —Ç—É—Ä–æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º" (‚úàÔ∏è, –∑–µ–ª–µ–Ω—ã–π)

### outgoing_payments
- payment_id (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π), category_id
- amount, title, description, recipient
- document_url, document_filename
- status (pending/approved/rejected)
- required_approvals, approved_count, rejected_count

### payment_approvals
- payment_id, admin_id
- status (pending/approved/rejected)
- comment (–ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏)
- sms_sent, approved_at, rejected_at

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è):

```bash
# 1. –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
mysql -u payments -p payments < database/migration-approval-system.sql

# 2. –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
mkdir -p uploads/payment-documents
chmod 755 uploads/payment-documents

# 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API
curl -X GET https://byfly-pay.com/api/approvals/categories \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

---

## üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

- **SMS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —É–∂–µ –µ—Å—Ç—å (smsc.kz)
- **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤** —á–∞—Å—Ç–∏—á–Ω–æ –µ—Å—Ç—å (upload.php)
- **JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** –≥–æ—Ç–æ–≤–∞

–ù—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç—å Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å SMS!

---

## ‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –¥–æ–¥–µ–ª–∫—É:

- Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: ~2-3 —á–∞—Å–∞
- SMS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: ~30 –º–∏–Ω—É—Ç
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: ~1 —á–∞—Å

**–ò–¢–û–ì–û: ~4 —á–∞—Å–∞** –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

–ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ì–û–¢–û–í–ê! –ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å backend! ‚úÖ





